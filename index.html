<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FE-like Balance Lab — V2.1 (Principal)</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!--
  MINI DOC (usage rapide)
  - 1) Onglet "Duels" : choisis un "Défenseur (STANDARD)" → toutes les jauges se basent dessus.
  - 2) Onglet "Principal" : clique une classe alliée → ajuste sliders → lis les verdicts (OK/Warn/Fail).
  - 3) Import/export : Onglet Données → JSON → Valider/Parser → Export jeu.
  - 4) Lecture rapide :
      - Hit = fiabilité (frustration si bas)
      - Dégâts attendus = rythme réel
      - TTK = tempo (2–3 conseillé sur standard)
      - Survie = combien de tours tu encaisses (approx)
  -->

  <header class="topbar">
    <div class="brand">
      <div class="logo">⚖️</div>
      <div>
        <div class="title">FE-like Balance Lab</div>
        <div class="subtitle">Outil statique offline — écran principal “balance par classe”</div>
      </div>
    </div>

    <div class="top-actions">
      <label class="pill">
        <input id="toggle-doubling" type="checkbox" />
        <span>Doubling (SPD)</span>
      </label>
      <label class="pill">
        <input id="toggle-crit" type="checkbox" />
        <span>Crit</span>
      </label>
      <div class="sep"></div>
      <div class="hint">
        Fixe un <b>ennemi standard</b> dans <b>Duels</b> → sinon les indicateurs sont moins cohérents.
      </div>
    </div>
  </header>

  <main class="container">
    <nav id="tabs" class="tabs">
      <button class="tab active" data-tab="main">Principal</button>
      <button class="tab" data-tab="data">Données</button>
      <button class="tab" data-tab="duels">Duels</button>
      <button class="tab" data-tab="stage">Stage</button>
      <button class="tab" data-tab="checklist">Checklist</button>
      <button class="tab" data-tab="tuning">Tuning</button>
    </nav>

    <!-- PRINCIPAL -->
    <section id="tab-main" class="tabpane active">
      <div class="panel">
        <div class="panel-head">
          <h2>Écran principal — Balance par classe alliée</h2>
          <div class="hint">
            Objectif: <b>tu ajustes une classe</b> et tu vois instantanément si tu restes “dans les clous”
            ou si tu <b>casses le jeu</b> (hit trop bas, dégâts 0, one-shot, combats trop longs…).
          </div>
        </div>

        <div class="grid two">
          <!-- Liste classes alliées -->
          <div class="card">
            <div class="card-head">
              <h3>Classes alliées (dans tes unités Player)</h3>
              <div class="hint">Clique une classe pour régler ses stats.</div>
            </div>
            <div id="ally-class-list" class="list"></div>

            <div class="callout mt12">
              <b>Rappel:</b> le “Standard” vient de <b>Duels → Défenseur</b>.
              Si tu ne l’as pas choisi, les verdicts sont moins utiles.
            </div>
          </div>

          <!-- Détails classe -->
          <div class="card">
            <div class="card-head">
              <h3 id="main-class-title">Sélectionne une classe</h3>
              <div class="hint">Sliders = paramètres réels (modifient le JSON de travail).</div>
            </div>

            <div id="main-class-empty" class="badge">Choisis une classe à gauche.</div>

            <div id="main-class-panel" class="stack" style="display:none;">
              <div class="grid two">
                <div class="card">
                  <div class="card-head">
                    <h3>Réglages</h3>
                    <div class="hint">Stats de base + arme de référence.</div>
                  </div>

                  <div class="form-grid">
                    <div>
                      <label class="label">Arme de référence</label>
                      <select id="main-weapon-select" class="input"></select>
                      <div class="hint">Cette arme sert pour les indicateurs (Hit/Dmg/TTK).</div>
                    </div>

                    <div>
                      <label class="label">Type de dégâts</label>
                      <div id="main-dmg-type" class="badge">—</div>
                      <div class="hint">Indique si ça tape sur DEF ou MDEF.</div>
                    </div>
                  </div>

                  <div class="hr"></div>

                  <div class="hint"><b>Base stats (sliders)</b></div>
                  <div id="main-stats-sliders" class="stack mt8"></div>

                  <div class="hr"></div>

                  <div class="hint"><b>Arme (sliders)</b></div>
                  <div id="main-weapon-sliders" class="stack mt8"></div>

                  <div class="hint mt12">
                    ⚠️ Si tu modifies l’arme ici, ça modifie l’arme globale (toutes unités qui l’utilisent).
                    Si tu veux une arme dédiée à une seule unité, duplique-la dans l’onglet Données.
                  </div>
                </div>

                <div class="card">
                  <div class="card-head">
                    <h3>Indicateurs (vs Standard)</h3>
                    <div class="hint">OK/Warn/Fail + explications simples.</div>
                  </div>

                  <div id="main-indicators" class="stack"></div>

                  <div class="hr"></div>

                  <div class="card">
                    <div class="card-head">
                      <h3>Alertes “ça casse le jeu”</h3>
                      <div class="hint">Les 4 problèmes les plus fréquents.</div>
                    </div>
                    <div id="main-break-alerts" class="stack"></div>
                  </div>
                </div>
              </div>

              <div class="card">
                <div class="card-head">
                  <h3>Recommandations automatiques</h3>
                  <div class="hint">Actions simples à faire (par ordre d’impact).</div>
                </div>
                <div id="main-recos" class="stack"></div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </section>

    <!-- DONNÉES -->
    <section id="tab-data" class="tabpane">
      <div class="grid two">
        <div class="panel">
          <div class="panel-head">
            <h2>JSON (éditeur)</h2>
            <div class="row gap wrap">
              <button class="btn" id="btn-validate">Valider / Parser</button>
              <button class="btn ghost" id="btn-reset">Reset exemple</button>
              <div class="sep"></div>
              <button class="btn ghost" id="btn-copy-editor">Copier JSON</button>
              <button class="btn ghost" id="btn-download-editor">Télécharger JSON</button>
            </div>
          </div>

          <div id="json-status" class="status"></div>
          <textarea id="json-editor" class="textarea" spellcheck="false"></textarea>

          <div class="panel-foot">
            <div class="hint">
              Tu peux tout importer ici. Les sliders du “Principal” et les formulaires modifient ce JSON de travail.
            </div>
          </div>
        </div>

        <div class="panel">
          <div class="panel-head">
            <h2>Édition rapide</h2>
            <div class="row gap wrap">
              <button class="btn small" id="btn-add-class">+ Classe</button>
              <button class="btn small" id="btn-add-weapon">+ Arme</button>
              <button class="btn small" id="btn-add-terrain">+ Terrain</button>
            </div>
          </div>

          <details open class="accordion">
            <summary>Classes</summary>
            <div id="classes-form" class="stack"></div>
          </details>

          <details class="accordion">
            <summary>Armes</summary>
            <div id="weapons-form" class="stack"></div>
          </details>

          <details class="accordion">
            <summary>Terrains</summary>
            <div id="terrain-form" class="stack"></div>
          </details>

          <details class="accordion">
            <summary>Notes de design</summary>
            <textarea id="design-notes" class="textarea small" spellcheck="false"></textarea>
          </details>

          <details class="accordion">
            <summary>Export (format jeu)</summary>

            <div class="row gap wrap">
              <button class="btn" id="btn-copy-game">Copier export jeu</button>
              <button class="btn ghost" id="btn-download-game">Télécharger export jeu</button>
            </div>

            <pre id="export-preview" class="pre"></pre>
          </details>
        </div>
      </div>
    </section>

    <!-- DUELS -->
   
